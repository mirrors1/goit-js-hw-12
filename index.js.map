{"version":3,"file":"index.js","sources":["../src/img/bi_x-octagon.png","../src/img/bi_check2-circle.png","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEoSURBVHgBrZXtEYIwDIZDT86/biKjuBFlEt0AV3EX/tB61Abo8dUkRXjvqj2bvk8KSQUgZK0tjbEuZWAs5XOhzJ0DnWXw7rruA6zU3X9ovwfyPK9AUsi8bc0LEoWx0kn+Nk+GHDEXIWeYkxDOvGmaQjKMxSwg46ReBxljCunFheTiEFvjGgzZtzpm4IM0BZlObom9rRYBFEQynwMuIOh6zbU3wmnfTChsQj8qXJP2i4A1ZAQkmaMUJEopcLG5pKQThLsJMx9/Sr57RMDcPDyW+TsRIVwVcdXClfCwvihTutH4UhwgsUbD5u0BIciY7zMGAUGxGPRaJMdB9mpjHnQGhDQ/AyKaH4Fw5ps+CNdClrnSf98A+D99pdTdOffYc330mk4iD+6x/ACnmEjn99LB/AAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAE7SURBVHgB3VVtccMwDFUYhMHMYIUQCIUQBguDhEnCYBuClkHHIGHQMtCk6/Pi8/lz25/23b3L1ZLfkxtZIXp0NLkEZm7l0QtfhQbLN+Gn8Nw0zUa/gQgb4cw7NuEZvDrrM4rw9x9S4h1ElJOaRQpYYGy82AjzQ0j8iOAlJJyDIz5RpKoVbP9VHAkzEgxVokTc2JdGlciKI6n3q092Qo04Et+1a1xxbBz/LI7kk/a4tzbFTGLi8vtNOBQZxExSlcd0NKCXZqXw6X5Mcn8L3y/nRygwYONLxiQlbjuxDwXb1GbHZEjEZ78T/YQFRzRUCS65R0hSA51DxaMCp19Bk0vuUEk+eS/qgj1HKgHfJ+pqj8zxcT3yPtY7qgHv897iih4/OebRAixKPplGHp1Qj2/fyyb8Ei7yybzRU+Mbv95G35qxX4AAAAAASUVORK5CYII=\"","import axios from 'axios';\r\n\r\nconst API_KEY = '47379272-a961c7172d29abe92af06f616';\r\n\r\nexport const searchParams = new URLSearchParams({\r\n  key: API_KEY,\r\n  q: 'yellow+flower',\r\n  image_type: 'photo',\r\n  orientation: 'horizontal',\r\n  safesearch: true,\r\n  page: 1,\r\n  per_page: 15,\r\n});\r\n\r\nconst BASE_URL = `https://pixabay.com/api/`;\r\n\r\nexport async function loadData(\r\n  url = BASE_URL,\r\n  options = { params: searchParams }\r\n) {\r\n  const { data } = await axios(url, options);\r\n  return data;\r\n}\r\n","import SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\n\r\nexport function createMarkup(arr) {\r\n  return arr\r\n    .map(\r\n      ({\r\n        id,\r\n        webformatURL,\r\n        tags,\r\n        likes,\r\n        views,\r\n        comments,\r\n        downloads,\r\n        largeImageURL,\r\n      }) => `\r\n        <li data-id=\"${id}\" class=\"list__item\">\r\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">                          \r\n            <img class=\"item-img\" src=\"${webformatURL}\" alt=\"${tags}\"/>                  \r\n          </a>\r\n          <ul class=\"item-container-list\">\r\n              <li class=\"container-list\">\r\n                <h3 class=\"item-title\">Likes</h3>\r\n                <p class=\"item-content\">${likes}</p>\r\n              </li>\r\n              <li class=\"container-list\">\r\n                <h3 class=\"item-title\">Views</h3>\r\n                <p class=\"item-content\">${views}</p>\r\n              </li>\r\n              <li class=\"container-list\">\r\n                <h3 class=\"item-title\">Comments</h3>\r\n                <p class=\"item-content\">${comments}</p>\r\n              </li>\r\n              <li class=\"container-list\">\r\n                <h3 class=\"item-title\">Downloads</h3>\r\n                <p class=\"item-content\">${downloads}</p>\r\n              </li>\r\n            </ul>          \r\n        </li>\r\n    `\r\n    )\r\n    .join('');\r\n}\r\n\r\nexport const lightbox = new SimpleLightbox('.list a', {\r\n  captionsData: 'alt',\r\n  captionDelay: 250,\r\n});\r\n","import iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\nimport iconRejected from './img/bi_x-octagon.png';\r\nimport iconFulfilled from './img/bi_check2-circle.png';\r\n\r\nimport { loadData, searchParams } from './js/pixabay-api';\r\nimport { createMarkup, lightbox } from './js/render-functions';\r\n\r\nconst form = document.querySelector('.form');\r\nconst container = document.querySelector('.list');\r\nconst loadMore = document.querySelector('.js-load-more');\r\nconst loader = document.querySelector('.js-loader');\r\n\r\nform.addEventListener('submit', searchPicture);\r\nloadMore.addEventListener('click', onLoadMore);\r\n\r\nlet page = 1;\r\nsearchParams.set('page', page);\r\nconst per_page = searchParams.get('per_page');\r\n\r\nfunction searchPicture(event) {\r\n  event.preventDefault();\r\n  const searchMsg = event.target.elements.message.value.trim();\r\n  if (!searchMsg) {\r\n    return;\r\n  }\r\n  loader.classList.remove('hidden');\r\n\r\n  searchParams.set('q', searchMsg);\r\n  page = 1;\r\n  searchParams.set('page', page);\r\n\r\n  loadData()\r\n    .then(data => {\r\n      loadMore.classList.add('hidden');\r\n      loader.classList.remove('hidden');\r\n      if (!data.total) {\r\n        iziToast.show({\r\n          theme: 'dark',\r\n          iconUrl: iconRejected,\r\n          backgroundColor: '#EF4040',\r\n          message: `Sorry, there are no images matching your search query. Please try again!`,\r\n          messageSize: '16px',\r\n          messageLineHeight: '150%',\r\n          position: 'topRight',\r\n          maxWidth: '354px',\r\n        });\r\n        container.innerHTML = '';\r\n        loadMore.classList.add('hidden');\r\n        loader.classList.add('hidden');\r\n        return;\r\n      }\r\n      container.innerHTML = createMarkup(data.hits);\r\n      loader.classList.add('hidden');\r\n\r\n      if (data.totalHits > page * per_page) {\r\n        loadMore.classList.remove('hidden');\r\n      } else {\r\n        iziToast.show({\r\n          theme: 'dark',\r\n          iconUrl: iconFulfilled,\r\n          backgroundColor: '#59a10d',\r\n          message: `We're sorry, but you've reached the end of search results.`,\r\n          messageSize: '16px',\r\n          messageLineHeight: '150%',\r\n          position: 'topRight',\r\n        });\r\n      }\r\n\r\n      lightbox.refresh();\r\n    })\r\n    .catch(error => {\r\n      iziToast.show({\r\n        theme: 'dark',\r\n        iconUrl: iconRejected,\r\n        backgroundColor: '#EF4040',\r\n        message: `Error: ${error.message}`,\r\n        messageSize: '16px',\r\n        messageLineHeight: '150%',\r\n        position: 'topRight',\r\n        maxWidth: '354px',\r\n      });\r\n      container.innerHTML = '';\r\n      loadMore.classList.add('hidden');\r\n      loader.classList.add('hidden');\r\n    })\r\n    .finally(() => {\r\n      event.target.reset();\r\n    });\r\n}\r\n\r\nasync function onLoadMore() {\r\n  loader.classList.remove('hidden');\r\n  loadMore.classList.add('hidden');\r\n  page++;\r\n  searchParams.set('page', page);\r\n\r\n  try {\r\n    const data = await loadData();\r\n    container.insertAdjacentHTML('beforeend', createMarkup(data.hits));\r\n    loader.classList.add('hidden');\r\n\r\n    if (data.totalHits > page * per_page) {\r\n      loadMore.classList.remove('hidden');\r\n    } else {\r\n      iziToast.show({\r\n        theme: 'dark',\r\n        iconUrl: iconFulfilled,\r\n        backgroundColor: '#59a10d',\r\n        message: `We're sorry, but you've reached the end of search results.`,\r\n        messageSize: '16px',\r\n        messageLineHeight: '150%',\r\n        position: 'topRight',\r\n      });\r\n    }\r\n    const card = document.querySelector('.list__item');\r\n    const cardHeight = card.getBoundingClientRect().height;\r\n    window.scrollBy({\r\n      left: 0,\r\n      top: cardHeight * 3.3,\r\n      behavior: 'smooth',\r\n    });\r\n\r\n    lightbox.refresh();\r\n  } catch (error) {\r\n    iziToast.show({\r\n      theme: 'dark',\r\n      iconUrl: iconRejected,\r\n      backgroundColor: '#EF4040',\r\n      message: `Error: ${error.message}`,\r\n      messageSize: '16px',\r\n      messageLineHeight: '150%',\r\n      position: 'topRight',\r\n      maxWidth: '354px',\r\n    });\r\n  }\r\n}\r\n"],"names":["iconRejected","iconFulfilled","API_KEY","searchParams","BASE_URL","loadData","url","options","data","axios","createMarkup","arr","id","webformatURL","tags","likes","views","comments","downloads","largeImageURL","lightbox","SimpleLightbox","form","container","loadMore","loader","searchPicture","onLoadMore","page","per_page","event","searchMsg","iziToast","error","cardHeight"],"mappings":"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"}